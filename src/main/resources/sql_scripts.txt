CREATE TABLE RESELLER (ID INT AUTO_INCREMENT PRIMARY KEY, NAME VARCHAR(250), DESCRIPTION VARCHAR(250), DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT);

CREATE TABLE CUSTOMER (ID INT AUTO_INCREMENT PRIMARY KEY, NAME VARCHAR(250), DESCRIPTION VARCHAR(250), RESELLER_ID INT, VISIT_DATE DATE, DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE);

CREATE TABLE ADDRESS (ID INT AUTO_INCREMENT PRIMARY KEY, ADDRESS_LINE1 VARCHAR(250), ADDRESS_LINE2 VARCHAR(250), STREET VARCHAR(100), CITY VARCHAR(50), STATE VARCHAR(50), COUNTRY VARCHAR(50), POSTAL_CODE VARCHAR(50), CONTACT_PERSON VARCHAR(250), PHONE_NO VARCHAR(50), MOBILE_NUMBER_PRIMARY VARCHAR(50), MOBILE_NUMBER_SECONDARY VARCHAR(50), ADDRESS_TYPE INT, DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT);

CREATE TABLE RESELLER_ADDRESS(ID INT AUTO_INCREMENT PRIMARY KEY, RESELLER_ID INT, ADDRESS_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE, FOREIGN KEY(ADDRESS_ID) REFERENCES ADDRESS(ID) ON DELETE CASCADE);

CREATE TABLE CUSTOMER_ADDRESS(ID INT AUTO_INCREMENT PRIMARY KEY, CUSTOMER_ID INT, ADDRESS_ID INT, FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(ID) ON DELETE CASCADE, FOREIGN KEY(ADDRESS_ID) REFERENCES ADDRESS(ID) ON DELETE CASCADE);

CREATE TABLE SALES_EXEC (ID INT AUTO_INCREMENT PRIMARY KEY, NAME VARCHAR(250), DESCRIPTION VARCHAR(250), RESELLER_ID INT, DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE);

CREATE TABLE CUSTOMER_SALES_EXEC (CUSTOMER_ID INT, SALES_EXEC_ID INT, FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(ID) ON DELETE CASCADE, FOREIGN KEY(SALES_EXEC_ID) REFERENCES USER(ID) ON DELETE CASCADE, UNIQUE(CUSTOMER_ID, SALES_EXEC_ID));

CREATE TABLE USER (ID INT AUTO_INCREMENT PRIMARY KEY, USER_NAME VARCHAR(250), PASSWORD VARCHAR(250), DESCRIPTION VARCHAR(250), EMAIL_ID VARCHAR(250), MOBILE_NO VARCHAR(250), FIRST_NAME VARCHAR(250), LAST_NAME VARCHAR(250), STATUS INT, DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, UNIQUE(USER_NAME), UNIQUE(EMAIL_ID));

CREATE TABLE ROLE (ID INT AUTO_INCREMENT PRIMARY KEY, ROLE_NAME VARCHAR(250), DESCRIPTION VARCHAR(250), DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, UNIQUE(ROLE_NAME));

CREATE TABLE USER_ROLE ( USER_ID INT, ROLE_ID INT, FOREIGN KEY(USER_ID) REFERENCES USER(ID), FOREIGN KEY(ROLE_ID) REFERENCES ROLE(ID));

CREATE TABLE RESELLER_USER ( RESELLER_ID INT, USER_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID), FOREIGN KEY(USER_ID) REFERENCES USER(ID));

CREATE TABLE AREA (ID INT AUTO_INCREMENT PRIMARY KEY, RESELLER_ID INT, NAME VARCHAR(250), DESCRIPTION VARCHAR(250), WORD_NO VARCHAR(250), PIN_CODE VARCHAR(250), DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE);

CREATE TABLE BEAT (ID INT AUTO_INCREMENT PRIMARY KEY, RESELLER_ID INT, NAME VARCHAR(250), DESCRIPTION VARCHAR(250),COVERAGE_SCHEDULE VARCHAR(250), DISTANCE INT, DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE);

CREATE TABLE BEAT_AREA ( BEAT_ID INT, AREA_ID INT, FOREIGN KEY(BEAT_ID) REFERENCES BEAT(ID), FOREIGN KEY(AREA_ID) REFERENCES AREA(ID));

CREATE TABLE SUPPLIER (ID INT AUTO_INCREMENT PRIMARY KEY, NAME VARCHAR(250), DESCRIPTION VARCHAR(250), RESELLER_ID INT, DATE_CREATED DATE, DATE_MODIFIED DATE, COMPANY_ID INT, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE);

CREATE TABLE SUPPLIER_ADDRESS(ID INT AUTO_INCREMENT PRIMARY KEY, SUPPLIER_ID INT, ADDRESS_ID INT, FOREIGN KEY(SUPPLIER_ID) REFERENCES SUPPLIER(ID) ON DELETE CASCADE, FOREIGN KEY(ADDRESS_ID) REFERENCES ADDRESS(ID) ON DELETE CASCADE);

CREATE TABLE SUPPLIER_USER ( SUPPLIER_ID INT, USER_ID INT, FOREIGN KEY(SUPPLIER_ID) REFERENCES SUPPLIER(ID), FOREIGN KEY(USER_ID) REFERENCES USER(ID));

CREATE TABLE BEAT_AREA ( BEAT_ID INT, AREA_ID INT, FOREIGN KEY(BEAT_ID) REFERENCES BEAT(ID), FOREIGN KEY(AREA_ID) REFERENCES AREA(ID));

CREATE TABLE SALES_EXEC_BEATS ( SALES_EXEC_ID INT, BEAT_ID INT, FOREIGN KEY(SALES_EXEC_ID) REFERENCES USER(ID), FOREIGN KEY(BEAT_ID) REFERENCES BEAT(ID));

CREATE TABLE BEAT_CUSTOMER ( BEAT_ID INT, CUSTOMER_ID INT, FOREIGN KEY(BEAT_ID) REFERENCES BEAT(ID), FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(ID));

CREATE TABLE SALES_EXEC_BEATS_CUSTOMERS ( SALES_EXEC_ID INT, BEAT_ID INT, CUSTOMER_ID INT, FOREIGN KEY(SALES_EXEC_ID) REFERENCES USER(ID), FOREIGN KEY(BEAT_ID) REFERENCES BEAT(ID), FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(ID));

CREATE TABLE CUSTOMER_OTP (ID INT AUTO_INCREMENT PRIMARY KEY, CUSTOMER_ID INT NOT NULL, RESELLER_ID INT NOT NULL, SALES_EXEC_ID INT NOT NULL, GENERTAED_OTP VARCHAR(10) NOT NULL, SUBMITTED_OTP VARCHAR(10), OTP_TYPE INT NOT NULL, GENERATED_DATE_TIME DATETIME NOT NULL, SUBMITTED_DATE_TIME DATETIME, RETRY_COUNT INT, DATE_CREATED DATE NOT NULL, DATE_MODIFIED DATE, COMPANY_ID INT, FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(ID) ON DELETE CASCADE, FOREIGN KEY(RESELLER_ID) REFERENCES RESELLER(ID) ON DELETE CASCADE, FOREIGN KEY(SALES_EXEC_ID) REFERENCES USER(ID));

INSERT INTO ROLE VALUES (1, 'admin', 'Admin Role', CURDATE(), null, 0);
INSERT INTO ROLE VALUES (2, 'salesman', 'Sales Executive', CURDATE(), null, 0);
INSERT INTO ROLE VALUES (3, 'deliveryman', 'Delivery Executive', CURDATE(), null, 0);
INSERT INTO ROLE VALUES (4, 'collectionexec', 'Collection Executive', CURDATE(), null, 0);
